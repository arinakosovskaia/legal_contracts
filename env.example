OPENAI_API_KEY=replace_me
# Optional: Nebius AI Studio (OpenAI-compatible). If set, the app will use it.
NEBIUS_API_KEY=replace_me
# Nebius TokenFactory (OpenAI-compatible)
NEBIUS_BASE_URL=https://api.tokenfactory.nebius.com/v1/
# Basic auth for demo
BASIC_AUTH_USER=demo
BASIC_AUTH_PASS=demo
ENABLE_AUTH=1

# Limits
MAX_PAGES=20
# Set to 0 to disable paragraph limit (useful for debugging)
MAX_PARAGRAPHS=0
MAX_FILE_MB=15
TTL_HOURS=24

# Models (OpenAI-compatible). For Nebius TokenFactory example:
OPENAI_MODEL_STAGE1=Qwen/Qwen3-30B-A3B-Thinking-2507
OPENAI_MODEL_STAGE2=Qwen/Qwen3-30B-A3B-Thinking-2507

# Optional HTTP proxy (only if you need it). Leave empty otherwise.
# HTTP_PROXY=
# HTTPS_PROXY=

# LLM concurrency
MAX_LLM_CONCURRENCY=8

# Use single classifier (replaces stage1+stage2)
SINGLE_CLASSIFIER=1

# Stage1 multi-label: max categories per paragraph (cost control)
STAGE1_MAX_CATEGORIES=10
# Router threshold: choose all categories with prob >= t_router
T_ROUTER=0.3
# How many probs to ask stage1 to output (top-k + any above threshold)
ROUTER_TOPK_PROBS=15
# Stage1 section mode: use previous N paragraphs as context
STAGE1_CONTEXT_PARAGRAPHS=5
# Approx max input size for stage1 block (characters, to avoid provider context errors)
STAGE1_MAX_INPUT_CHARS=60000
# Stage1 chunk overlap inside a section (to avoid cutting exception clauses)
STAGE1_OVERLAP_FRAC=0.15
STAGE1_OVERLAP_MIN=1
STAGE1_OVERLAP_MAX=8

# Stage1 sliding windows (CUAD-style) inside each structural section
STAGE1_WINDOW_TOKENS=1100
STAGE1_STRIDE_TOKENS=300
STAGE1_TRIGGER_EDGE_FRAC=0.15

# Stage2 context window (neighbors in the same section)
STAGE2_CONTEXT_PARAGRAPHS=3
STAGE2_MAX_CONTEXT_CHARS=6000

# Few-shot (CUAD QA reference snippets) for stage2
ENABLE_FEWSHOT=1
FEWSHOT_MAX_PER_CATEGORY=2
FEWSHOT_CONTEXT_WINDOW=240
# FEWSHOT_DIR=./data/fewshot_by_category

